CREATE TABLE customers (
    id INT,
    name VARCHAR(30),
    age INT,
    address VARCHAR(50),
    salary DECIMAL(10,2)
);

INSERT INTO customers (id, name, age, address, salary) VALUES (101, 'Kumar', 45, 'Bengaluru', 20000);
INSERT INTO customers (id, name, age, address, salary) VALUES (102, 'Rohan', 42, 'Tumkuru', 10000);
INSERT INTO customers (id, name, age, address, salary) VALUES (103, 'Kumar', 38, 'Belagavi', 9000);
INSERT INTO customers (id, name, age, address, salary) VALUES (104, 'Chandu', 35, 'Tiptur', 9000);

CREATE TABLE salary_change_log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT,
    old_salary DECIMAL(10,2),
    new_salary DECIMAL(10,2),
    salary_difference DECIMAL(10,2),
    action_type VARCHAR(10),
    log_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

DELIMITER $$

CREATE TRIGGER display_salary_changes
BEFORE UPDATE ON customers
FOR EACH ROW
BEGIN
    IF NEW.id > 0 THEN

        INSERT INTO salary_change_log (customer_id, old_salary, new_salary, salary_difference, action_type)
        VALUES (NEW.id, OLD.salary, NEW.salary, NEW.salary - OLD.salary, 'UPDATE');

    END IF;
END $$

DELIMITER ;

INSERT INTO customers (id, name, age, address, salary) 
VALUES (105, 'Keerthi', 36, 'Mangaluru', 9000);

UPDATE customers SET salary = 10000 WHERE id = 105;

DELETE FROM customers WHERE id = 105;

SELECT * FROM salary_change_log;
